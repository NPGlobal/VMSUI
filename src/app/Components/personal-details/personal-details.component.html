<form *ngIf="personalDetailsForm" class="form-inline" [formGroup]="personalDetailsForm"
    (ngSubmit)="SavePersonalDetails()" novalidate>
    <div class="main-div">
        <!-- Vendor Details -->
        <div class="detail-page">

            <!-- Personal Information -->

            <div class="col clearfix" formGroupName="PersonalDetails">
                <div class="content-heading">
                    <a href="javascript:void(0)" (click)="ToggleContainer(personalDetailsForm.get('PersonalDetails'))"
                        class="glyphicon-expand">
                        <span>{{personalDetailsForm.get('PersonalDetails').controls.IsExpanded.value ? '-' : '+'}}</span>
                    </a>Personal Details
                </div>
                <div class="slider" [ngClass]="{
                      closed: !personalDetailsForm.get('PersonalDetails').controls.IsExpanded.value
                  }">
                    <div class="col-md-8">
                        <div class="col-md-12 form-group">
                            <div class="col-md-6">
                                <label class="text">Producer Code</label>
                                <span>
                                    <input type="text" formControlName="VendorCode" class="form-control input-sm" />
                                </span>
                            </div>
                            <div class="col-md-6">
                                <label class="text">Producer Name</label>
                                <span>
                                    <input type="text" formControlName="VendorName" class="form-control input-sm"
                                        value="" />
                                </span>
                            </div>
                        </div>
                        <div class="col-md-12 form-group">
                            <div class="col-md-6">
                                <label class="text">GST Registration No.</label>
                                <span><input type="text" formControlName="GSTIN" class="form-control input-sm" /></span>
                            </div>
                            <div class="col-md-6">
                                <label class="text">PAN No.</label>
                                <span><input type="text" formControlName="PANNo" class="form-control input-sm" /></span>
                            </div>
                        </div>
                        <div class="col-md-12 form-group">
                            <div class="col-md-6">
                                <div class="masterVendorLabelDiv" for="Ref_VendorCode">Reference Producer Name</div>
                                <select type="text" class="form-control col-md-12 input-sm"
                                    formControlName="Ref_VendorCode">
                                    <option value="-1" selected="selected">Select</option>
                                    <option *ngFor="let item of ReferenceVendorList" value="{{item.VendorCode}}">{{item.VendorName
                                        + ' (' + item.VendorCode + ')'}}</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <div class="masterVendorLabelDiv">Master Producer Name
                                    <small>(Parent/sister company)</small>
                                </div>
                                <select type="text" class="form-control col-md-12 input-sm"
                                    formControlName="MasterVendorId">
                                    <option value="-1">Select</option>
                                    <option *ngFor="let item of MasterVendorList" value="{{item.MasterVendorId}}">
                                        {{item.MasterVendorName }}</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4" style="padding-left:0px;">

                        <div class="col-md-12 form-group">
                            <label class="text">Producer Type</label>
                            &nbsp;
                            <div class="col-md-2">
                                <label class="radio-inline">
                                    <input type="checkbox" formControlName="IsDirectVendor">
                                    <span style="margin-left:5px;" class="text">DP</span>
                                </label>
                            </div>
                            &nbsp;
                            <div class="col-md-1">
                                <label class="radio-inline">
                                    <input type="checkbox" formControlName="IsJWVendor">
                                    <span style="margin-left:5px;" class="text">JW</span>
                                </label>
                            </div>
                        </div>

                        <div *ngIf="personalDetailsForm.get('PersonalDetails.IsJWVendor').value">
                            <div class="row">
                                <div class="col-sm-5">
                                    <div class="col-sm-6 PHandStore form-group">
                                        <label class="text">PH/FO</label>
                                        <select formControlName="PHList" class="form-control input-sm" size="3"
                                            multiple="multiple">
                                            <option *ngFor="let PH of PHList" [value]="PH.OrgUnitCode">
                                                {{ PH.OrgUnitName }}</option>
                                        </select>
                                    </div>
                                    <div class="col-sm-6 PHandStore form-group">
                                        <label class="text">Store</label>
                                        <select formControlName="StoreList" class="form-control input-sm" size="3"
                                            multiple="multiple">
                                            <option *ngFor="let Store of StoreList" [value]="Store.OrgUnitCode">
                                                {{ Store.OrgUnitName }}</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-sm-2" style="padding-left:25px;">

                                    <input type="button" style="margin-top: 60px;" value=">"
                                        (click)="MoveToSelectedPHList($event)">
                                    <br />
                                    <input type="button" style="margin-top: 10px;" value="<"
                                        (click)="MoveToPHList($event)">

                                </div>
                                <div class="col-sm-5 form-group" style="padding-left:8px;padding-right: 0px">
                                    <label class="text">PH/Store</label>
                                    <select formControlName="SelectedPHStoreList" class="form-control input-sm" size="8"
                                        multiple="multiple">
                                        <option *ngFor="let PHStore of SelectedPHStoreList"
                                            [value]="PHStore.OrgUnitCode">{{ PHStore.OrgUnitName }}</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <hr>

            <!-- Vendor Address -->

            <div class="col" formGroupName="Address">
                <div class="content-heading">
                    <a href="javascript:void(0)" (click)="ToggleContainer(personalDetailsForm.get('Address'))"
                        class="glyphicon-expand">
                        <span>{{personalDetailsForm.get('Address').controls.IsExpanded.value ? '-' : '+'}}</span>
                    </a>Address
                </div>
                <div class="slider" [ngClass]="{
                      closed: !personalDetailsForm.get('Address').controls.IsExpanded.value
                  }">

                    <div class="col-md-12 form-group">
                        <span>
                            <button style="margin-left: 15px;" type="button" class="btn btn-primary float-right"
                                data-toggle="modal" data-target="#myModal" data-backdrop="static" data-keyboard="false">
                                <i class="fa fa-plus"></i>
                                <span title="Add new" class="py-4">Add new address</span>
                            </button>
                        </span>
                    </div>

                    <div class="col-lg-12 col-sm-12 col-md-12" style="margin-top:10px;">
                        <table class="table table-striped table-bordered table-hover">
                            <thead>
                                <tr>
                                    <th scope="col">Address1</th>
                                    <th scope="col">Address2</th>
                                    <th scope="col">Address3</th>
                                    <th scope="col">City/District(PIN)</th>
                                    <th scope="col">State, Country</th>
                                    <th scope="col">Address Type</th>
                                    <th scope="col">Primary Contact</th>
                                    <th scope="col">Secondary Contact</th>
                                    <th scope="col">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let address of vendorAddress;index as i;">
                                    <td>{{address.Address1}}</td>
                                    <td> {{address.Address2}}</td>
                                    <td> {{address.Address3}}</td>
                                    <td>{{address.CityCode + '(' + address.PIN + ')'}}</td>
                                    <td>{{address.StateName + ', ' + address.CountryName}}</td>
                                    <td>{{(address.AddressTypeCode === 'F' ? 'Factory' : 'Office')}}</td>
                                    <td>{{address.PrimaryContactName}}</td>
                                    <td>{{address.SecondaryContactName}}</td>
                                    <td>
                                        <button #modalOpenButton type="button" data-target="#myModal"
                                            data-backdrop="static" data-keyboard="false" data-toggle="modal"
                                            style="display:none;">
                                        </button>
                                        <a title="Edit" href="javascript:void(0)" (click)="OpenAddressModal(address)">
                                            <i class="fa fa-edit"></i>
                                        </a>
                                        <a class="ml-2" title="View Contacts" href="javascript:void(0)"
                                            (click)="ViewContact(address)">
                                            <i class="fa fa-address-book"></i>
                                        </a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                </div>
            </div>
            <hr>

            <!-- Other Registration Detail -->

            <div class="col" formGroupName="OtherRegDetails">
                <div class="content-heading">
                    <a href="javascript:void(0)" (click)="ToggleContainer(personalDetailsForm.get('OtherRegDetails'))"
                        class="glyphicon-expand">
                        <span>{{personalDetailsForm.get('OtherRegDetails').controls.IsExpanded.value ? '-' : '+'}}</span>
                    </a>Other Registration Detail
                </div>
                <div class="slider" [ngClass]="{
                  closed: !personalDetailsForm.get('OtherRegDetails').controls.IsExpanded.value
              }">
                    <div class="col-md-12 form-group">
                        <div class="col-md-4">
                            <label class="text">Associated With Fabindia Since</label>
                            <span>
                                <select formControlName="AssociatedSinceYear" class="form-control input-sm">
                                    <option *ngFor="let Year of YearList" value="{{Year}}">{{Year}}</option>
                                </select>
                            </span>
                        </div>
                        <div class="col-md-4">
                            <label class="text">Nature Of Enterprise</label>
                            <span>
                                <select *ngIf="VendorTypeList" formControlName="VendorType_MDDCode"
                                    class="form-control input-sm">
                                    <option selected value="">Select</option>
                                    <option *ngFor="let VendorType of VendorTypeList" value="{{VendorType.MDDCode}}">
                                        {{VendorType.MDDName}}</option>
                                </select>
                            </span>
                        </div>
                    </div>
                    <div class="col-md-12 form-group">
                        <div class="col-md-4">
                            <label class="text">Name Of Partner/Proprietor/etc 1</label>
                            <span>
                                <input formControlName="PersonTopRanker1" name="PersonTopRanker1" type="text"
                                    class="form-control input-sm" />
                            </span>
                        </div>
                        <div class="col-md-4">
                            <label class="text">Name Of Partner/Proprietor/etc 2</label>
                            <span>
                                <input formControlName="PersonTopRanker2" name="PersonTopRanker2" type="text"
                                    class="form-control input-sm" />
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            <hr>

            <!-- Top 5 Customers Name -->

            <div class="col" formGroupName="CustomerDetails">
                <div class="content-heading">
                    <a href="javascript:void(0)" (click)="ToggleContainer(personalDetailsForm.get('CustomerDetails'))"
                        class="glyphicon-expand">
                        <span>{{personalDetailsForm.get('CustomerDetails').controls.IsExpanded.value ? '-' : '+'}}</span>
                    </a>Top 5 Customers
                </div>
                <div class="slider" [ngClass]="{
                  closed: !personalDetailsForm.get('CustomerDetails').controls.IsExpanded.value
              }">
                    <div class="col-md-12 form-group">
                        <div class="col-md-4">
                            <label class="text">Customer1</label>
                            <span>
                                <input formControlName="OtherCustomer1" type="text" class="form-control input-sm" />
                            </span>
                        </div>
                        <div class="col-md-4">
                            <label class="text">Customer2</label>
                            <span>
                                <input formControlName="OtherCustomer2" type="text" class="form-control input-sm" />
                            </span>
                        </div>
                        <div class="col-md-4">
                            <label class="text">Customer3</label>
                            <span>
                                <input formControlName="OtherCustomer3" type="text" class="form-control input-sm" />
                            </span>
                        </div>
                    </div>
                    <div class="col-md-12 form-group">
                        <div class="col-md-4">
                            <label class="text">Customer4</label>
                            <span>
                                <input formControlName="OtherCustomer4" type="text" class="form-control input-sm" />
                            </span>
                        </div>
                        <div class="col-md-4">
                            <label class="text">Customer5</label>
                            <span>
                                <input formControlName="OtherCustomer5" type="text" class="form-control input-sm" />
                            </span>
                        </div>
                    </div>
                </div>
            </div>

        </div>
        <hr>

        <!-- End of Detail Page -->

        <div class="col-md-12 page-footer">
            <button type="submit" class="mr-3 btn btn-primary">Save</button>
            <button routerLink="vendor" type="button" class="btn">Cancel</button>
        </div>
    </div>
</form>

<app-address-form [vendor]="vendor" [Address]="Address"></app-address-form>