<form [formGroup]="DepartmentMappingForm" (ngSubmit)="SaveVendorDepartment()" novalidate>

  <div class="form-inline">
    <div class="content-heading" align="left">Department Mapping</div>
    <div class="row">
      <div class="col-sm-5">
        <div class="col-sm-6 mt-1 mb-1 form-group dropdown">
          <label class="text">Division</label>
          <select (focus)="UnselectOptions(DepartmentMappingForm.controls.Department)" formControlName="DivList"
            class="form-control input-sm DivisionClass" size="5" multiple="multiple">
            <option *ngFor="let Div of DivisionList" class="DivisionClass" [value]="Div.MDDCode">
              {{ Div.MDDName }}</option>
          </select>
        </div>
        <div class="col-sm-6 form-group dropdown">
          <select formControlName="Division" class="form-control input-sm DivisionClass"
            (change)="GetDepartment($event)">
            <option *ngIf="DivisionList.length === 0" [value]="0">No Division Left</option>
            <option *ngIf="DivisionList.length !== DivisionCount" [value]="1">Select</option>
            <option *ngIf="DivisionList.length === DivisionCount" [value]="-1" selected="selected">All</option>
            <option *ngFor="let Div of DivisionList" [value]="Div.MDDCode">
              {{ Div.MDDName }}</option>
          </select>
          <label class="text">Department</label>
          <select (focus)="UnselectOptions(DepartmentMappingForm.controls.DivList)" formControlName="Department"
            class="form-control input-sm dropdown DepartmentClass" size="5" multiple="multiple">
            <option *ngIf="FilteredDeptList.length === 0" [value]="0"></option>
            <option *ngFor="let Dept of FilteredDeptList" class="DepartmentClass" [value]="Dept.MDDCode">
              {{ Dept.MDDName }}</option>
          </select>
        </div>
      </div>
      <div class="col-sm-2" style="padding-left:25px;">

        <input type="button" [disabled]="EnableOnAdd()" style="margin-top: 110px;" value=">"
          (click)="MoveToSelectedList()">
        <br />
        <input type="button" [disabled]="EnableOnRemove()" style="margin-top: 10px;" value="<"
          (click)="RemoveFromSelectedList()">

      </div>
      <div class="col-sm-5" style="padding-left:8px;padding-right: 0px">
        <div class="mt-1 mb-1 col-sm-6 form-group" style="width: 250px; max-width: 250px;;">
          <label class="text">Selected Division/Department</label>
          <select onfocusout="event.target.value = ''" formControlName="SelectedList" class="form-control input-sm"
            size="15" multiple="multiple">
            <option *ngFor="let DD of SelectedDD"  [value]="DD.MDDCode" [ngStyle]="{background: DD.color}">
              {{ DD.MDHCode === 'DEPT' ? DD.MDDName + ' (Department)' : DD.MDDName + ' (Division)' }}
            </option>
          </select>
        </div>
      </div>
    </div>
  </div>


  <div class="col-md-12">
    <hr>
    <div class="page-footer md-auto mr-auto" style="margin-bottom: 10px">
      <button type="submit" class="mr-3 btn btn-primary">Save</button>
      <button [routerLink]="['/vendor']" type="button" class="btn btn-secondary">Cancel</button>
    </div>
  </div>
</form>


<button #alertModalButton type="button" data-target="#AlertModal" data-backdrop="static" data-keyboard="false"
  data-toggle="modal" style="display:none;">
</button>

<div class="modal fade" id="AlertModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">{{PopUpMessage}}</h5>
        <button class="btn btn-primary" type="button" data-dismiss="modal">OK</button>
      </div>
    </div>
  </div>
</div>

<!-- Delete Confirmation Modal -->

<button #DeleteModalButton type="button" data-target="#DeleteModal" data-backdrop="static" data-keyboard="false"
  data-toggle="modal" style="display:none;">
</button>

<div class="modal fade" id="DeleteModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Ready to Replace?</h5>
        <button class="close" type="button" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">Ã—</span>
        </button>
      </div>
      <div class="modal-body">{{PopUpMessage}}</div>
      <div class="modal-footer">
         <button class="btn btn-primary" data-dismiss="modal" (click)="DeleteExistingDepartment()">Yes</button>
        <button class="btn btn-secondary" type="button" data-dismiss="modal" (click)="dismiss()">Cancel</button>
      </div>
    </div>
  </div>
</div>